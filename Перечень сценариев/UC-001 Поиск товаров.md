## UC-001 Поиск товаров

| Поле                | Значение                        |
|---------------------|---------------------------------|
| **ID**              | UC-001                          |
| **Название**        | Поиск товаров                   |
| **Требования**      | FR-101: Полноценный поиск по названию/описанию/артикулу|
| **Элемент Бэклога** |                                 |
| **Сервис**          | catalog-service                 |
| **Статус**          | ЧЕРНОВИК                        |
| **Описание**        | Сценарий описывает процесс поиска товаров покупателем по ключевым словам в названии, описании или артикуле. Является точкой входа в пользовательский путь «Поиск и выбор товара».<br>Интегрируется с:<br>UC-002 Фильтрация по категориям<br>UC-003 Просмотр карточки товара|
| **Участники**       | ROLE_CUSTOMER (Покупатель) | 
| **Триггер**         | Пользователь вводит текст в строку поиска и подтверждает запрос (нажатием Enter или кнопки «Найти»). | 
| **Предусловия**     | 1. Пользователь находится на сайте/в мобильном приложении маркетплейса.<br>2. Строка поиска доступна и активна.<br>3. Сервис `catalog-service` доступен и имеет актуальный индекс товаров.<br>4. Пользователь не обязан быть авторизован (поиск доступен всем).. | 
| **Постусловия**     | - **Успешное завершение:** Отображён список товаров, соответствующих запросу (минимум 1 результат).<br>- **Альтернативное завершение:** Отображено сообщение «Товары не найдены» с рекомендациями.<br>- **Исключительное завершение:** Показано сообщение об ошибке; результаты не отображены.| 
| **Успешный сценарий** | 1. Пользователь вводит текст запроса (минимум 2 символа) в строку поиска. Система валидирует длину запроса. Не отправляет запрос при длине < 2 символов.<br>2. Пользователь нажимает Enter или кнопку «Найти». Система отображает индикатор загрузки и отправляет GET-запрос к `catalog-service`: /api/v1/catalog-service...<br>`catalog-service` выполняет поиск по индексу в полях: `название`, `описание`, `артикул (SKU)`<br>Сервис возвращает HTTP 200 + JSON с массивом товаров (макс. 50 записей), количеством результатов, временем обработки.<br>Система скрывает индикатор загрузки. Отображает:<br>- Заголовок: «Результаты по запросу:»<br>- Количество найденных товаров<br>- Список карточек товаров (изображение, название, цена, рейтинг)<br>- Блок «Популярные запросы» (кэшированный)<br> 3. Пользователь кликает на карточку товара. Происходит переход к сценарию **UC-003** Просмотр карточки товара. | 
| **Альтернативный сценарий АС1**| Пользователь отправил запрос длиной < 2 символов или пустой.<br>Система не отправляет запрос в `catalog-service`.<br>Система отображает подсказку: *«Введите минимум 2 символа для поиска»*.<br> Фокус остаётся в строке поиска.<br> Возврат к шагу 1 успешного сценария.|
| **Альтернативный сценарий АС2**| После шага 4 успешного сценария — `catalog-service` вернул пустой массив.<br>Система отображает:<br> *«По запросу «{query}» ничего не найдено»* <br> *Рекомендации:* <br> - Проверьте опечатки <br> - Попробуйте синонимы <br> - Используйте фильтры каталога <br> Предлагает кнопки: «Перейти в каталог», «Очистить запрос».|
| **Сценарий исключений СИ1**| После шага 3 успешного сценария — `catalog-service` вернул HTTP 5xx / таймаут > 3с. Система логирует ошибку (уровень ERROR) с traceID. <br> Отображает пользователю: <br> *«Не удалось выполнить поиск. Повторите попытку позже или воспользуйтесь каталогом»* <br> Отображается кнопка: «Перейти в каталог». <br> Скрывает индикатор загрузки. <br> Пользователь остаётся на текущей странице.|
